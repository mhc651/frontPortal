webpackJsonp([5],{MvMl:function(e,t){},PAGp:function(e,t){},XgoQ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("4YfN"),a=s.n(i),r=s("9rMa"),l=s("H5im"),n=s("fAxu"),o={name:"NewPassword",components:{inputItem:l.a},data:function(){var e=this;return{ind:0,fsecond:5,ftimer:null,fsd:!0,clientHeight:"500",src:"",disabledBtn:!1,time:180,timer:null,err:!1,errMsg:"",reviewUrl:"",formValidate:{cardNo:"",phone:"",phoneCode:"",password:"",confirmPwd:"",username:"",orgname:"",realname:"",mobile:"",verification:""},ruleValidate:{cardNo:[{required:!0,message:"身份证号码不能为空",trigger:"blur"},{validator:n.a.validateIdCard,trigger:"blur"}],username:[{required:!0,message:"账号不能为空",trigger:"blur"}],phoneCode:[{required:!0,message:"验证码不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{type:"string",min:6,message:"密码为6-20位英文字母、数字的组合",trigger:"blur"},{type:"string",max:20,message:"密码为6-20位英文字母、数字的组合",trigger:"blur"}],confirmPwd:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{validator:function(t,s,i){s!==e.formValidate.password?i(new Error("密码和确认密码输入不一致")):i()},trigger:"blur"}]}}},computed:a()({},Object(r.c)(["app","qcode"])),methods:a()({},Object(r.b)(["getPhoneCode","getqcode","resetpwd","validatePhonefp","validMessFp","validUserName"]),{mathRandow:function(){for(var e=[],t=0;t<36;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},getNumCode:function(){this.disabledBtn=!this.disabledBtn,this.time=120,clearInterval(this.timer),this.timer=null,this.disabledBtn&&(this.timer=setInterval(function(){this.time--,0===this.time&&(this.disabledBtn=!this.disabledBtn,this.time=120,clearInterval(this.timer))}.bind(this),1e3)),this.getPhoneCode({username:this.formValidate.username,types:"forgetPwd"}).then(function(e){e.success})},fiveCountd:function(){this.fsecond=5,clearInterval(this.ftimer),this.ftimer=null,this.fsd&&(this.ftimer=setInterval(function(){this.fsecond--,0==this.fsecond&&(clearInterval(this.ftimer),this.$router.push("/login"))}.bind(this),1e3))},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e)if(0==t.ind){var s={username:t.formValidate.username};t.validUserName(s).then(function(e){console.log("res is"+e),e.success&&(t.ind=1,document.getElementById("twoth").setAttribute("class","comC nowC"),t.errMsg="",t.formValidate.realname=e.content.realname,t.formValidate.mobile=e.content.mobile,t.formValidate.orgname=e.content.orgname)},function(e){t.errMsg=e.errcode,console.log("err is "+e)})}else if(1==t.ind){var i={username:t.formValidate.username,realname:t.formValidate.realname,orgname:t.formValidate.orgname,mobile:t.formValidate.mobile,verification:t.formValidate.phoneCode};t.validMessFp(i).then(function(e){e.success&&(t.ind=2,document.getElementById("twoth").removeAttribute("class","nowC"),document.getElementById("twoth").setAttribute("class","comC passC"),document.getElementById("threeth").setAttribute("class","comC nowC"),t.errMsg="")},function(e){t.errMsg=e.errcode,console.log("校验短信err is "+e)})}else if(2==t.ind){var a={username:t.formValidate.username,userpwd:t.formValidate.password,userpwd2:t.formValidate.confirmPwd};document.getElementById("threeth").setAttribute("class","comC passC"),document.getElementById("four").setAttribute("class","comC nowC"),t.resetpwd(a).then(function(e){e.success?(t.ind=3,t.fiveCountd(),document.getElementById("threeth").setAttribute("class","comC passC"),document.getElementById("four").setAttribute("class","comC nowC"),t.errMsg=""):t.errMsg=e.errcode})}})},setHeight:function(){if(document.documentElement.clientHeight<=768)this.clientHeight="498px";else{var e=document.getElementsByTagName("footer")[0].clientHeight;console.log("footer height is: "+e),this.clientHeight=document.documentElement.clientHeight-e-91-30+"px"}}}),mounted:function(){this.setHeight();var e=this;window.onresize=function(){e.setHeight()}}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container--fluid"},[s("div",{staticClass:"main",attrs:{id:"fpw"}},[s("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":245}},[s("table",{staticClass:"ititle"},[s("thead",[(0==e.ind?e.classNow="nowC":e.classNow="passC")?s("th",{staticClass:"nowC comC",class:e.classNow},[s("div",[e._v("1")]),s("span",[e._v("填写账户名")])]):e._e(),e._v(" "),s("th",{staticClass:"defaultC comC",attrs:{id:"twoth"}},[s("div",[e._v("2")]),s("span",[e._v("验证身份")])]),e._v(" "),s("th",{staticClass:"defaultC comC",attrs:{id:"threeth"}},[s("div",[e._v("3")]),s("span",[e._v("设置新密码")])]),e._v(" "),s("th",{staticClass:"defaultC comC",attrs:{id:"four"}},[s("div",[e._v("4")]),s("span",[e._v("重置成功")])])])]),e._v(" "),s("div",{staticClass:"mt60"},[0==e.ind?s("div",[s("inputItem",{ref:"username",attrs:{labelVal:{label:"账号"},model:e.formValidate,prop:"username",plh:" 请输入登录账号"}})],1):e._e(),e._v(" "),1==e.ind?s("div",[s("div",{staticClass:"verificationCode publicInput"},[s("FormItem",{staticClass:"formItem",attrs:{label:"用户名：",prop:"username"}},[s("label",{staticClass:"rightTip text-center lh40"},[e._v(e._s(e.formValidate.username))])])],1),e._v(" "),s("div",{staticClass:"verificationCode publicInput"},[s("FormItem",{staticClass:"formItem",attrs:{label:"企业名称：",prop:"orgname"}},[s("label",{staticClass:"rightTip text-center lh40"},[e._v(e._s(e.formValidate.orgname))])])],1),e._v(" "),s("div",{staticClass:"verificationCode publicInput"},[s("FormItem",{staticClass:"formItem",attrs:{label:"已验证手机：",prop:"mobile"}},[s("label",{staticClass:"rightTip text-center lh40"},[e._v(e._s(e.formValidate.mobile))])])],1),e._v(" "),s("div",{staticClass:"verificationCode publicInput"},[s("FormItem",{staticClass:"formItem",attrs:{label:"验证码：",prop:"phoneCode"}},[s("div",{staticClass:"NumCode"},[s("Input",{attrs:{type:"text",placeholder:"请输入验证码"},model:{value:e.formValidate.phoneCode,callback:function(t){e.$set(e.formValidate,"phoneCode",t)},expression:"formValidate.phoneCode"}}),e._v(" "),s("Button",{directives:[{name:"show",rawName:"v-show",value:e.disabledBtn,expression:"disabledBtn"}],attrs:{disabled:""}},[e._v(e._s(e.time)+"s后可重新获取")]),e._v(" "),s("Button",{directives:[{name:"show",rawName:"v-show",value:!e.disabledBtn,expression:"!disabledBtn"}],on:{click:e.getNumCode}},[e._v("获取验证码")])],1),e._v(" "),s("label",{staticClass:"rightTip text-center"},[e._v("请于2分钟内查收手机短信，并填写短信中的验证码")])])],1),e._v(" "),s("div",{staticClass:"verificationCode publicInput"},[s("FormItem",{staticClass:"formItem"},[s("i",{staticClass:" icon hx hx-hx_quangantanhao fzth"}),e._v(" "),s("div",{staticClass:"ml210"},[e._v("没收到短信验证码")]),e._v(" "),s("div",{staticClass:"ml210"},[e._v("1、网络通讯异常可能会造成短信丢失，请重新获取或稍后再试。")]),e._v(" "),s("div",{staticClass:"ml210"},[e._v("2、请核实手机是否已欠费停机，或者屏蔽了系统短信。")])])],1)]):e._e(),e._v(" "),2==e.ind?s("div",[s("div",{staticClass:"verificationCode publicInput"},[s("FormItem",{staticClass:"formItem",attrs:{label:"用户名：",prop:"username"}},[s("label",{staticClass:"rightTip text-center lh40"},[e._v(e._s(e.formValidate.username))])])],1),e._v(" "),s("div",{staticClass:"verificationCode publicInput"},[s("FormItem",{staticClass:"formItem",attrs:{label:"企业名称：",prop:"orgname"}},[s("label",{staticClass:"rightTip text-center lh40"},[e._v(e._s(e.formValidate.orgname))])])],1),e._v(" "),s("div",{staticClass:"verificationCode publicInput"},[s("FormItem",{staticClass:"formItem",attrs:{label:"已验证手机：",prop:"mobile"}},[s("label",{staticClass:"rightTip text-center lh40"},[e._v(e._s(e.formValidate.mobile))])])],1),e._v(" "),s("inputItem",{attrs:{labelVal:{label:"输入新密码",tip:"密码为6-20位英文字母、数字的组合"},model:e.formValidate,prop:"password",inputType:"password"}}),e._v(" "),s("inputItem",{attrs:{labelVal:{label:"确认新密码",tip:"请确保两次密码输入保持一致"},model:e.formValidate,prop:"confirmPwd",inputType:"password"}})],1):e._e(),e._v(" "),3==e.ind?s("div",[s("div",{staticClass:"congr"},[e._v("恭喜您！密码设置成功，请重新登录！")]),e._v(" "),s("div",{staticClass:"relogin"},[e._v("系统将在"),s("span",{staticClass:"textred"},[e._v(e._s(e.fsecond))]),s("span",[e._v("秒后自动调整至登录页面，您可以选择直接登陆")]),e._v(" "),s("router-link",{staticClass:"pull-right relot",attrs:{to:"/login"}},[e._v("返回登录")])],1)]):e._e()])]),e._v(" "),s("div",{staticClass:"registerWrap w1198"},[s("p",{staticClass:"errRemind"},[e._v(e._s(e.errMsg))]),e._v(" "),0==e.ind||1==e.ind||2==e.ind?s("Button",{staticClass:"registerBtn",attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("下一步")]):e._e()],1)],1)])},staticRenderFns:[]};var m=s("vSla")(o,d,!1,function(e){s("MvMl"),s("q33h"),s("w4ZE"),s("PAGp")},"data-v-23c5a37b",null);t.default=m.exports},q33h:function(e,t){},w4ZE:function(e,t){}});
//# sourceMappingURL=5.abc57a7f34ea23f791ff.js.map