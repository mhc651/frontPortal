webpackJsonp([7],{"6DfK":function(e,t){},hnhI:function(e,t){},yJwW:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("3cXf"),r=a.n(i),s=a("4YfN"),n=a.n(s),l=a("9rMa"),o=a("H5im"),d=a("MWK4"),c={components:{inputItem:o.a},data:function(){return{clientHeight:"500",caL_errMsg:'首次登录时，请下载并安装"CA证书客户端"，仅支持IE浏览器。',dsb:!0,fruit:["（自动校验报名企业与绑定企业是否一致）"],entryt:1,fsecond:5,ftimer:null,fsd:!0,errMsg:"",cabind_error:"",bindCaUpdata:"",formValidate:{userOldPassword:"",userNewPassword:"",confirmPwd:"",name:"",applyOrg:"",bindingOrg:"",serialNum:"",express:"",interest:["（校验企业/机构名称与绑定企业是否一致）"]},ruleValidate:{name:[{required:!0,message:"账号不能为空",trigger:"blur"}],applyOrg:[{required:!0,message:"报名企业不能为空",trigger:"blur"}],bindingOrg:[{required:!0,message:"绑定企业不能为空",trigger:"blur"}],serialNum:[{required:!0,message:"证书序列号不能为空",trigger:"blur"}],express:[{required:!0,message:"有效期不能为空",trigger:"blur"}]}}},computed:n()({},Object(l.c)(["app","entry","org_status"])),mounted:function(){this.getOrgStatu()},created:function(){},methods:n()({},Object(l.b)(["loginOut","getSerials","getRandom","bindCa","getOrgStatus"]),{getOrgStatu:function(){var e=this;this.getOrgStatus().then(function(t){e.formValidate.name=e.$store.state.org_status.account,e.formValidate.applyOrg=e.$store.state.org_status.org_name})},relogin:function(){this.loginOut(),this.$router.push("/login?tag=ca")},fiveCountd:function(e){this.fsecond=5,clearInterval(this.ftimer),this.ftimer=null,this.fsd&&(this.ftimer=setInterval(function(){this.fsecond--,0==this.fsecond&&(clearInterval(this.ftimer),1==e&&(this.loginOut(),this.$router.push("/login?tag=ca")))}.bind(this),1e3))},openBindCa:function(){this.cabind_error="",this.modal3=!0,this.$refs.formValidates.resetFields(),this.formValidate.name=this.$store.state.org_status.account,this.formValidate.applyOrg=this.$store.state.org_status.org_name,document.getElementById("caBindNext").setAttribute("class","dispnone"),document.getElementById("caBindf").style.display="block",document.getElementById("calerrordiv").style.display="block"},insCustom:function(){var e=document.getElementById("obj");if(null==e||null==e.object)return this.cabind_error="您未使用新版证书或未正确安装证书驱动",!1;this.cabind_error=""},getSerial:function(){var e=this;this.insCustom(),this.getRandom().then(function(t){console.log(t),e.serRandom=t.content;var a=d.a.getCertBsf(e.serRandom);1!=a?(console.log("1"+r()(a)),a&&e.getSerials(a).then(function(t){if(t.success){console.log("2"+r()(t.content));var i=t.content;e.formValidate.bindingOrg=i.generalName,e.formValidate.serialNum=i.serialNum,e.formValidate.express=i.express,a.applyOrg=e.formValidate.applyOrg,a.bindingOrg=e.formValidate.bindingOrg,a.serialNum=e.formValidate.serialNum,a.express=e.formValidate.express,a.username=e.formValidate.name,e.bindCaUpdata=a}})):e.cabind_error="未检测到UKey或Ukey未登陆"})},bindCas:function(){var e=this;this.$refs.formValidates.validate(function(t){t&&(e.formValidate.interest.length>0?e.bindCaUpdata.check=1:e.bindCaUpdata.check=2,e.bindCaUpdata.type="login",e.bindCa(e.bindCaUpdata).then(function(t){console.log(r()(t)),t.success&&(document.getElementById("caBindNext").removeAttribute("class","dispnone"),document.getElementById("caBindNext").setAttribute("class","hmid cont"),document.getElementById("caBindf").style.display="none",document.getElementById("calerrordiv").style.display="none",e.fiveCountd(1))},function(t){e.cabind_error=t.errmsg}))})}})},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container--fluid cbco"},[a("Form",{ref:"formValidates",staticClass:"hmid cont",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":90,id:"caBindf"}},[a("FormItem",{staticClass:"unedit",attrs:{label:"账号",prop:"name"}},[a("Input",{model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}})],1),e._v(" "),a("FormItem",{staticClass:"unedit",attrs:{label:"报名企业",prop:"applyOrg"}},[a("Input",{model:{value:e.formValidate.applyOrg,callback:function(t){e.$set(e.formValidate,"applyOrg",t)},expression:"formValidate.applyOrg"}})],1),e._v(" "),a("FormItem",{staticClass:"unedit",attrs:{label:"绑定企业",prop:"bindingOrg"}},[a("Input",{model:{value:e.formValidate.bindingOrg,callback:function(t){e.$set(e.formValidate,"bindingOrg",t)},expression:"formValidate.bindingOrg"}})],1),e._v(" "),a("FormItem",{staticClass:"unedit",attrs:{label:"证书序列号",prop:"serialNum"}},[a("Input",{model:{value:e.formValidate.serialNum,callback:function(t){e.$set(e.formValidate,"serialNum",t)},expression:"formValidate.serialNum"}}),e._v(" "),a("div",{staticClass:"xlh",on:{click:e.getSerial}},[e._v("获取序列号")])],1),e._v(" "),a("FormItem",{attrs:{label:"通用名校验",prop:"interest"}},[a("CheckboxGroup",{model:{value:e.formValidate.interest,callback:function(t){e.$set(e.formValidate,"interest",t)},expression:"formValidate.interest"}},[a("Checkbox",{attrs:{label:"（校验企业/机构名称与绑定企业是否一致）"}})],1)],1),e._v(" "),a("FormItem",{staticClass:"unedit",attrs:{label:"有效期",prop:"express"}},[a("Input",{model:{value:e.formValidate.express,callback:function(t){e.$set(e.formValidate,"express",t)},expression:"formValidate.express"}})],1),e._v(" "),a("FormItem",[a("div",{staticStyle:{visibility:"visible"}},[a("p",{staticClass:"errRemind"},[e._v(e._s(e.cabind_error))])]),e._v(" "),a("Button",{staticStyle:{width:"150px","margin-left":"60px"},attrs:{type:"primary"},on:{click:function(t){e.bindCas("formValidates")}}},[e._v("保存")])],1),e._v(" "),a("div",{staticStyle:{"border-top":"1px solid #e9eaec"}},[a("div",{staticStyle:{padding:"12px 18px 12px 18px"}},[e._v(e._s(e.caL_errMsg))])])],1),e._v(" "),a("div",{staticClass:"dispnone",attrs:{id:"caBindNext"}},[e._m(0),e._v(" "),a("div",{staticClass:"setsuctip"},[a("span",[e._v("系统将在")]),a("span",{staticClass:"textred"},[e._v(e._s(e.fsecond))]),e._v("秒后自动自动回到登录页面，您可以选择"),a("span",{staticClass:"relot",on:{click:e.relogin}},[e._v("重新登录")])])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"setsuctitle"},[t("span",[this._v("恭喜您！CA绑定成功，请重新登录！")])])}]};var u=a("vSla")(c,m,!1,function(e){a("6DfK"),a("hnhI")},"data-v-0ec5a165",null);t.default=u.exports}});
//# sourceMappingURL=7.f92171576de82482d188.js.map