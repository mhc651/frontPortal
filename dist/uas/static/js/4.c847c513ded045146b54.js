webpackJsonp([4],{CFKd:function(t,e){},IKiF:function(t,e){},XgoQ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("4YfN"),a=s.n(i),r=s("9rMa"),n=s("H5im"),l=s("fAxu"),o={name:"NewPassword",components:{inputItem:n.a},data:function(){var t=this;return{ind:0,fsecond:5,ftimer:null,fsd:!0,clientHeight:"500",src:"",disabledBtn:!1,time:180,timer:null,err:!1,errMsg:"",reviewUrl:"",formValidate:{cardNo:"",phone:"",phoneCode:"",password:"",confirmPwd:"",username:"",orgname:"",realname:"",mobile:"",verification:""},ruleValidate:{cardNo:[{required:!0,message:"身份证号码不能为空",trigger:"blur"},{validator:l.a.validateIdCard,trigger:"blur"}],username:[{required:!0,message:"账号不能为空",trigger:"blur"}],phoneCode:[{required:!0,message:"验证码不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{type:"string",min:6,message:"密码为6-20位英文字母、数字的组合",trigger:"blur"},{type:"string",max:20,message:"密码为6-20位英文字母、数字的组合",trigger:"blur"}],confirmPwd:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{validator:function(e,s,i){s!==t.formValidate.password?i(new Error("密码和确认密码输入不一致")):i()},trigger:"blur"}]}}},computed:a()({},Object(r.c)(["app","qcode"])),methods:a()({},Object(r.b)(["getPhoneCode","getqcode","resetpwd","validatePhonefp","validMessFp","validUserName"]),{mathRandow:function(){for(var t=[],e=0;e<36;e++)t[e]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]="0123456789abcdef".substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")},getNumCode:function(){this.disabledBtn=!this.disabledBtn,this.time=120,clearInterval(this.timer),this.timer=null,this.disabledBtn&&(this.timer=setInterval(function(){this.time--,0===this.time&&(this.disabledBtn=!this.disabledBtn,this.time=120,clearInterval(this.timer))}.bind(this),1e3)),this.getPhoneCode({username:this.formValidate.username,types:"forgetPwd"}).then(function(t){t.success})},fiveCountd:function(){this.fsecond=5,clearInterval(this.ftimer),this.ftimer=null,this.fsd&&(this.ftimer=setInterval(function(){this.fsecond--,0==this.fsecond&&(clearInterval(this.ftimer),this.$router.push("/login"))}.bind(this),1e3))},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t)if(0==e.ind){var s={username:e.formValidate.username};e.validUserName(s).then(function(t){console.log("res is"+t),t.success&&(e.ind=1,document.getElementById("twoth").setAttribute("class","comC nowC"),e.errMsg="",e.formValidate.realname=t.content.realname,e.formValidate.mobile=t.content.mobile,e.formValidate.orgname=t.content.orgname)},function(t){e.errMsg=t.errmsg,console.log("err is "+t)})}else if(1==e.ind){var i={username:e.formValidate.username,realname:e.formValidate.realname,orgname:e.formValidate.orgname,mobile:e.formValidate.mobile,verification:e.formValidate.phoneCode};e.validMessFp(i).then(function(t){t.success&&(e.ind=2,document.getElementById("twoth").removeAttribute("class","nowC"),document.getElementById("twoth").setAttribute("class","comC passC"),document.getElementById("threeth").setAttribute("class","comC nowC"),e.errMsg="")},function(t){e.errMsg=t.errmsg,console.log("校验短信err is "+t)})}else if(2==e.ind){var a={username:e.formValidate.username,userpwd:e.formValidate.password,userpwd2:e.formValidate.confirmPwd};document.getElementById("threeth").setAttribute("class","comC passC"),document.getElementById("four").setAttribute("class","comC nowC"),e.resetpwd(a).then(function(t){t.success?(e.ind=3,e.fiveCountd(),document.getElementById("threeth").setAttribute("class","comC passC"),document.getElementById("four").setAttribute("class","comC nowC"),e.errMsg=""):e.errMsg=t.errmsg})}})},setHeight:function(){if(document.documentElement.clientHeight<=768)this.clientHeight="498px";else{var t=document.getElementsByTagName("footer")[0].clientHeight;console.log("footer height is: "+t),this.clientHeight=document.documentElement.clientHeight-t-91-30+"px"}}}),mounted:function(){this.setHeight();var t=this;window.onresize=function(){t.setHeight()}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container--fluid"},[s("div",{staticClass:"main",attrs:{id:"fpw"}},[s("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":245}},[s("table",{staticClass:"ititle"},[s("thead",[(0==t.ind?t.classNow="nowC":t.classNow="passC")?s("th",{staticClass:"nowC comC",class:t.classNow},[s("div",[t._v("1")]),s("span",[t._v("填写账户名")])]):t._e(),t._v(" "),s("th",{staticClass:"defaultC comC",attrs:{id:"twoth"}},[s("div",[t._v("2")]),s("span",[t._v("验证身份")])]),t._v(" "),s("th",{staticClass:"defaultC comC",attrs:{id:"threeth"}},[s("div",[t._v("3")]),s("span",[t._v("设置新密码")])]),t._v(" "),s("th",{staticClass:"defaultC comC",attrs:{id:"four"}},[s("div",[t._v("4")]),s("span",[t._v("重置成功")])])])]),t._v(" "),s("div",{staticClass:"mt60"},[0==t.ind?s("div",[s("inputItem",{ref:"username",attrs:{labelVal:{label:"账号"},model:t.formValidate,prop:"username",plh:" 请输入登录账号"}})],1):t._e(),t._v(" "),1==t.ind?s("div",[s("div",{staticClass:"verificationCode publicInput"},[s("FormItem",{staticClass:"formItem",attrs:{label:"用户名：",prop:"username"}},[s("label",{staticClass:"rightTip text-center lh40"},[t._v(t._s(t.formValidate.username))])])],1),t._v(" "),s("div",{staticClass:"verificationCode publicInput"},[s("FormItem",{staticClass:"formItem",attrs:{label:"企业名称：",prop:"orgname"}},[s("label",{staticClass:"rightTip text-center lh40"},[t._v(t._s(t.formValidate.orgname))])])],1),t._v(" "),s("div",{staticClass:"verificationCode publicInput"},[s("FormItem",{staticClass:"formItem",attrs:{label:"已验证手机：",prop:"mobile"}},[s("label",{staticClass:"rightTip text-center lh40"},[t._v(t._s(t.formValidate.mobile))])])],1),t._v(" "),s("div",{staticClass:"verificationCode publicInput"},[s("FormItem",{staticClass:"formItem",attrs:{label:"验证码：",prop:"phoneCode"}},[s("div",{staticClass:"NumCode"},[s("Input",{attrs:{type:"text",placeholder:"请输入验证码"},model:{value:t.formValidate.phoneCode,callback:function(e){t.$set(t.formValidate,"phoneCode",e)},expression:"formValidate.phoneCode"}}),t._v(" "),s("Button",{directives:[{name:"show",rawName:"v-show",value:t.disabledBtn,expression:"disabledBtn"}],attrs:{disabled:""}},[t._v(t._s(t.time)+"s后可重新获取")]),t._v(" "),s("Button",{directives:[{name:"show",rawName:"v-show",value:!t.disabledBtn,expression:"!disabledBtn"}],on:{click:t.getNumCode}},[t._v("获取验证码")])],1),t._v(" "),s("label",{staticClass:"rightTip text-center"},[t._v("请于2分钟内查收手机短信，并填写短信中的验证码")])])],1),t._v(" "),s("div",{staticClass:"verificationCode publicInput"},[s("FormItem",{staticClass:"formItem"},[s("i",{staticClass:" icon hx hx-hx_quangantanhao fzth"}),t._v(" "),s("div",{staticClass:"ml210"},[t._v("没收到短信验证码")]),t._v(" "),s("div",{staticClass:"ml210"},[t._v("1、网络通讯异常可能会造成短信丢失，请重新获取或稍后再试。")]),t._v(" "),s("div",{staticClass:"ml210"},[t._v("2、请核实手机是否已欠费停机，或者屏蔽了系统短信。")])])],1)]):t._e(),t._v(" "),2==t.ind?s("div",[s("div",{staticClass:"verificationCode publicInput"},[s("FormItem",{staticClass:"formItem",attrs:{label:"用户名：",prop:"username"}},[s("label",{staticClass:"rightTip text-center lh40"},[t._v(t._s(t.formValidate.username))])])],1),t._v(" "),s("div",{staticClass:"verificationCode publicInput"},[s("FormItem",{staticClass:"formItem",attrs:{label:"企业名称：",prop:"orgname"}},[s("label",{staticClass:"rightTip text-center lh40"},[t._v(t._s(t.formValidate.orgname))])])],1),t._v(" "),s("div",{staticClass:"verificationCode publicInput"},[s("FormItem",{staticClass:"formItem",attrs:{label:"已验证手机：",prop:"mobile"}},[s("label",{staticClass:"rightTip text-center lh40"},[t._v(t._s(t.formValidate.mobile))])])],1),t._v(" "),s("inputItem",{attrs:{labelVal:{label:"输入新密码",tip:"密码为6-20位英文字母、数字的组合"},model:t.formValidate,prop:"password",inputType:"password"}}),t._v(" "),s("inputItem",{attrs:{labelVal:{label:"确认新密码",tip:"请确保两次密码输入保持一致"},model:t.formValidate,prop:"confirmPwd",inputType:"password"}})],1):t._e(),t._v(" "),3==t.ind?s("div",[s("div",{staticClass:"congr"},[t._v("恭喜您！密码设置成功，请重新登录！")]),t._v(" "),s("div",{staticClass:"relogin"},[t._v("系统将在"),s("span",{staticClass:"textred"},[t._v(t._s(t.fsecond))]),s("span",[t._v("秒后自动调整至登录页面，您可以选择直接登陆")]),t._v(" "),s("router-link",{staticClass:"pull-right relot",attrs:{to:"/login"}},[t._v("返回登录")])],1)]):t._e()])]),t._v(" "),s("div",{staticClass:"registerWrap w1198"},[s("p",{staticClass:"errRemind"},[t._v(t._s(t.errMsg))]),t._v(" "),0==t.ind||1==t.ind||2==t.ind?s("Button",{staticClass:"registerBtn",attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("下一步")]):t._e()],1)],1)])},staticRenderFns:[]};var m=s("vSla")(o,d,!1,function(t){s("IKiF"),s("uw3L"),s("d/gn"),s("CFKd")},"data-v-ff48a3da",null);e.default=m.exports},"d/gn":function(t,e){},uw3L:function(t,e){}});
//# sourceMappingURL=4.c847c513ded045146b54.js.map